# Jellyfin Ambilight Environment Configuration
# Copy this file to .env and update the values for your setup
# Usage: cp env.example .env && docker-compose up -d

# =================================================================
# REQUIRED: Jellyfin Configuration
# =================================================================
JELLYFIN_API_KEY=your_jellyfin_api_key_here
JELLYFIN_BASE_URL=https://your-jellyfin-server.com

# =================================================================
# REQUIRED: File Paths (update for your system)
# =================================================================
# Data storage (where ambilight data will be saved)
DATA_PATH=./data

# Media paths (where your movies and TV shows are located)
MOVIES_PATH=/path/to/your/movies
TV_PATH=/path/to/your/tv-shows

# =================================================================
# WLED Configuration
# =================================================================
WLED_HOST=your-wled-device.local
WLED_UDP_PORT=21324
WLED_UDP_PROTOCOL=UDP_RAW
WLED_UDP_RAW_PORT=19446
WLED_LED_COUNT=300

# =================================================================
# Device-WLED Pairing (REQUIRED for ambilight to work)
# =================================================================
# Map specific Jellyfin devices to specific WLED devices
# Format: WLED_DEVICE_<IDENTIFIER>=host:port
# Example: WLED_DEVICE_LIVING_ROOM=wled-lr.lan:19446
# Example: WLED_DEVICE_BEDROOM=wled-bedroom.local:19446
# Example: WLED_DEVICE_ANDROIDTV=wled-tv.lan:19446
# Example: WLED_DEVICE_PIXEL6A=wled-tv.lan:19446
#
# The identifier will be matched against the device name from Jellyfin
# IMPORTANT: If no mappings are configured, ambilight will be DISABLED for all sessions
# You must configure at least one WLED_DEVICE_* mapping for ambilight to work
DEVICE_MATCH_FIELD=DeviceName

# =================================================================
# LED Strip Configuration (update for your setup)
# =================================================================
AMBILIGHT_TOP_LED_COUNT=89
AMBILIGHT_BOTTOM_LED_COUNT=89
AMBILIGHT_LEFT_LED_COUNT=49
AMBILIGHT_RIGHT_LED_COUNT=49
AMBILIGHT_INPUT_POSITION=46
AMBILIGHT_SMOOTHING_MS=125
# =================================================================
# Performance Settings (optional)
# =================================================================
EXTRACTION_PRIORITY=newest_first
EXTRACTION_BATCH_SIZE=5
# Age limit for video extraction (0 = no limit, 1 = 1 day, 30 = 30 days, 0.5 = 12 hours)
EXTRACTION_MAX_AGE_DAYS=0
LIBRARY_SCAN_INTERVAL=1800
PLAYBACK_MONITOR_INTERVAL=0.05

# =================================================================
# System Settings (optional)
# =================================================================
LOG_LEVEL=INFO
DNS_SERVER=8.8.8.8
# =================================================================
# Extraction Time Window (optional)
# =================================================================
# Only start new extractions within this local time window (HH:MM 24h)
# Supports windows crossing midnight, e.g., 22:00 to 06:00
# Leave unset to allow extraction at any time
EXTRACTION_START_TIME=
EXTRACTION_END_TIME=
